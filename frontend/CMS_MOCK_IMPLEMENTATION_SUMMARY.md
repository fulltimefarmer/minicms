# CMS å‰ç«¯ Mock æ¨¡å¼å®æ–½æ€»ç»“

## ğŸ¯ å®æ–½ç›®æ ‡

ä¸º CMS å‰ç«¯é¡¹ç›®å®ç°å®Œæ•´çš„ Mock æ¨¡å¼ï¼Œä½¿å‰ç«¯åº”ç”¨èƒ½å¤Ÿåœ¨æ²¡æœ‰åç«¯æœåŠ¡çš„æƒ…å†µä¸‹ç‹¬ç«‹è¿è¡Œï¼Œæä¾›çœŸå®çš„ç”¨æˆ·äº¤äº’ä½“éªŒã€‚

## âœ… å·²å®Œæˆçš„åŠŸèƒ½

### 1. æ ¸å¿ƒæ¶æ„æ­å»º

- **ç¯å¢ƒé…ç½®ç³»ç»Ÿ**
  - `src/environments/environment.ts` - é»˜è®¤å¼€å‘ç¯å¢ƒ
  - `src/environments/environment.mock.ts` - Mock æ¨¡å¼ç¯å¢ƒ
  - Angular æ„å»ºé…ç½®æ”¯æŒ Mock æ¨¡å¼

- **ä»£ç†é…ç½®**
  - `proxy.conf.json` - API è¯·æ±‚ä»£ç†åˆ° Mock æœåŠ¡å™¨
  - è‡ªåŠ¨è·¯ç”± `/api/*` åˆ° `localhost:3001`

### 2. Mock æœåŠ¡å™¨ç³»ç»Ÿ

- **json-server é…ç½®**
  - ç«¯å£ï¼š3001
  - å®Œæ•´çš„ RESTful API æ”¯æŒ
  - æ•°æ®æŒä¹…åŒ–åˆ°æœ¬åœ°æ–‡ä»¶

- **è·¯ç”±æ˜ å°„**
  - `src/mock/routes.json` - å®Œæ•´çš„ API è·¯ç”±æ˜ å°„
  - æ”¯æŒæ‰€æœ‰ CMS æ¨¡å—çš„ API ç«¯ç‚¹

- **ä¸­é—´ä»¶å¤„ç†**
  - `src/mock/middleware.js` - è®¤è¯ã€CORSã€å“åº”æ ¼å¼åŒ–
  - æ¨¡æ‹Ÿç™»å½•éªŒè¯é€»è¾‘
  - ç»Ÿä¸€ API å“åº”æ ¼å¼

### 3. æ•°æ®ç”Ÿæˆç³»ç»Ÿ

- **è‡ªåŠ¨åŒ–æ•°æ®ç”Ÿæˆ**
  - `src/mock/generate-data.js` - æ™ºèƒ½æ•°æ®ç”Ÿæˆè„šæœ¬
  - çœŸå®ä¸”æœ‰æ„ä¹‰çš„ä¸­æ–‡æ•°æ®
  - ç¬¦åˆä¸šåŠ¡é€»è¾‘çš„æ•°æ®å…³è”

- **å®Œæ•´æ•°æ®è¦†ç›–**
  ```
  âœ… 25æ¡ å¾…åŠäº‹é¡¹ï¼ˆåŒ…å«ä¸åŒä¼˜å…ˆçº§ã€çŠ¶æ€ï¼‰
  âœ… 8ä¸ª ç”¨æˆ·è´¦æˆ·ï¼ˆå«ä¸åŒè§’è‰²ï¼‰
  âœ… 3ä¸ª ç”¨æˆ·è§’è‰²ï¼ˆç®¡ç†å‘˜ã€ç”¨æˆ·ã€ç»ç†ï¼‰
  âœ… 10ä¸ª æƒé™é…ç½®ï¼ˆç»†ç²’åº¦æƒé™æ§åˆ¶ï¼‰
  âœ… 3ä¸ª å­—å…¸ç±»å‹ï¼ˆç”¨æˆ·çŠ¶æ€ã€ä¼˜å…ˆçº§ã€èµ„äº§ç±»å‹ï¼‰
  âœ… 8ä¸ª å­—å…¸é¡¹ï¼ˆå¯¹åº”å­—å…¸ç±»å‹çš„å…·ä½“å€¼ï¼‰
  âœ… 6ä¸ª éƒ¨é—¨ï¼ˆå«å±‚çº§ç»“æ„ï¼‰
  âœ… 20ä¸ª èµ„äº§è®¾å¤‡ï¼ˆä¸åŒç±»å‹å’ŒçŠ¶æ€ï¼‰
  ```

### 4. API æ¥å£å®Œæ•´è¦†ç›–

#### è®¤è¯æ¨¡å—
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `POST /api/auth/logout` - ç”¨æˆ·ç™»å‡º  
- `POST /api/auth/refresh` - åˆ·æ–° Token

#### å¾…åŠç®¡ç†æ¨¡å—
- `GET /api/todos` - åˆ†é¡µè·å–å¾…åŠåˆ—è¡¨
- `GET /api/todos/all` - è·å–æ‰€æœ‰å¾…åŠ
- `POST /api/todos` - åˆ›å»ºå¾…åŠ
- `PUT /api/todos/:id` - æ›´æ–°å¾…åŠ
- `DELETE /api/todos/:id` - åˆ é™¤å¾…åŠ
- `PATCH /api/todos/:id/complete` - æ ‡è®°å®Œæˆ
- `PATCH /api/todos/:id/incomplete` - æ ‡è®°æœªå®Œæˆ
- `GET /api/todos/search` - æœç´¢å¾…åŠ
- `GET /api/todos/status` - æŒ‰çŠ¶æ€ç­›é€‰
- `GET /api/todos/priority/:priority` - æŒ‰ä¼˜å…ˆçº§ç­›é€‰
- `GET /api/todos/overdue` - è·å–é€¾æœŸå¾…åŠ
- `GET /api/todos/today` - è·å–ä»Šæ—¥å¾…åŠ
- `GET /api/todos/stats` - è·å–ç»Ÿè®¡æ•°æ®
- `PATCH /api/todos/batch/status` - æ‰¹é‡çŠ¶æ€æ›´æ–°
- `DELETE /api/todos/all` - æ¸…ç©ºæ‰€æœ‰å¾…åŠ

#### ç”¨æˆ·ç®¡ç†æ¨¡å—
- `GET /api/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `POST /api/users` - åˆ›å»ºç”¨æˆ·
- `PUT /api/users/:id` - æ›´æ–°ç”¨æˆ·
- `DELETE /api/users/:id` - åˆ é™¤ç”¨æˆ·

#### æƒé™ç®¡ç†æ¨¡å—
- `GET /api/roles` - è·å–è§’è‰²åˆ—è¡¨
- `GET /api/permissions` - è·å–æƒé™åˆ—è¡¨

#### å­—å…¸ç®¡ç†æ¨¡å—
- `GET /api/dict-types` - è·å–å­—å…¸ç±»å‹
- `GET /api/dict-types/active` - è·å–æ¿€æ´»çš„å­—å…¸ç±»å‹
- `POST /api/dict-types` - åˆ›å»ºå­—å…¸ç±»å‹
- `PUT /api/dict-types/:id` - æ›´æ–°å­—å…¸ç±»å‹
- `DELETE /api/dict-types/:id` - åˆ é™¤å­—å…¸ç±»å‹
- `GET /api/dict-items` - è·å–å­—å…¸é¡¹
- `GET /api/dict-items/type/:typeId` - æŒ‰ç±»å‹è·å–å­—å…¸é¡¹
- `POST /api/dict-items` - åˆ›å»ºå­—å…¸é¡¹
- `PUT /api/dict-items/:id` - æ›´æ–°å­—å…¸é¡¹
- `DELETE /api/dict-items/:id` - åˆ é™¤å­—å…¸é¡¹

#### éƒ¨é—¨ç®¡ç†æ¨¡å—
- `GET /api/departments` - è·å–éƒ¨é—¨åˆ—è¡¨
- `GET /api/departments/tree` - è·å–éƒ¨é—¨æ ‘ç»“æ„
- `POST /api/departments` - åˆ›å»ºéƒ¨é—¨
- `PUT /api/departments/:id` - æ›´æ–°éƒ¨é—¨
- `DELETE /api/departments/:id` - åˆ é™¤éƒ¨é—¨

#### èµ„äº§ç®¡ç†æ¨¡å—
- `GET /api/assets` - è·å–èµ„äº§åˆ—è¡¨
- `GET /api/assets/unassigned` - è·å–æœªåˆ†é…èµ„äº§
- `POST /api/assets` - åˆ›å»ºèµ„äº§
- `DELETE /api/assets/:id` - åˆ é™¤èµ„äº§
- `POST /api/assets/:id/bind/:userId` - åˆ†é…èµ„äº§
- `POST /api/assets/:id/unbind` - å›æ”¶èµ„äº§

### 5. å¼€å‘å·¥å…·å’Œå‘½ä»¤

- **npm è„šæœ¬é›†æˆ**
  ```json
  "start:mock": "å¯åŠ¨ Mock æ¨¡å¼ï¼ˆå‰ç«¯ + APIï¼‰",
  "mock:server": "å•ç‹¬å¯åŠ¨ Mock API æœåŠ¡å™¨", 
  "mock:generate": "é‡æ–°ç”Ÿæˆ Mock æ•°æ®"
  ```

- **ä¸€é”®å¯åŠ¨è„šæœ¬**
  - `start-mock.sh` - è‡ªåŠ¨æ£€æµ‹ä¾èµ–ã€ç”Ÿæˆæ•°æ®ã€å¯åŠ¨æœåŠ¡
  - è·¨å¹³å°å…¼å®¹ï¼Œæä¾›å‹å¥½çš„å¯åŠ¨ä¿¡æ¯

### 6. æœåŠ¡ä»£ç é€‚é…

- **ç¯å¢ƒå˜é‡é›†æˆ**
  - æ‰€æœ‰æœåŠ¡ç±»ä½¿ç”¨ `environment.apiUrl`
  - è‡ªåŠ¨æ ¹æ®ç¯å¢ƒåˆ‡æ¢ API ç«¯ç‚¹
  - æ— éœ€ä¿®æ”¹ä¸šåŠ¡é€»è¾‘ä»£ç 

- **å·²é€‚é…çš„æœåŠ¡**
  - `AuthService` - è®¤è¯æœåŠ¡
  - `TodoService` - å¾…åŠæœåŠ¡
  - å­—å…¸ç®¡ç†ç»„ä»¶
  - éƒ¨é—¨ç®¡ç†ç»„ä»¶
  - ç”¨æˆ·ç®¡ç†ç»„ä»¶
  - èµ„äº§ç®¡ç†ç»„ä»¶

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¯åŠ¨
```bash
cd frontend
./start-mock.sh
```

### è®¿é—®ä¿¡æ¯
- **å‰ç«¯**: http://localhost:4200
- **Mock API**: http://localhost:3001
- **ç™»å½•è´¦å·**: admin / 123456

### å¼€å‘å‘½ä»¤
```bash
# ç”Ÿæˆæ–°çš„ Mock æ•°æ®
npm run mock:generate

# å¯åŠ¨ Mock æ¨¡å¼
npm run start:mock

# æ™®é€šå¼€å‘æ¨¡å¼
npm start
```

## ğŸ“‹ æŠ€æœ¯ç‰¹ç‚¹

### 1. çœŸå®æ€§
- å®Œæ•´çš„ HTTP å“åº”æ¨¡æ‹Ÿ
- çœŸå®çš„ä¸šåŠ¡æ•°æ®ç»“æ„
- ç¬¦åˆ RESTful è§„èŒƒçš„ API

### 2. å¯ç»´æŠ¤æ€§
- æ¨¡å—åŒ–çš„æ•°æ®ç”Ÿæˆå‡½æ•°
- æ¸…æ™°çš„æ–‡ä»¶ç»„ç»‡ç»“æ„
- æ˜“äºæ‰©å±•å’Œä¿®æ”¹

### 3. å¼€å‘å‹å¥½
- çƒ­é‡è½½æ”¯æŒ
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- å®Œæ•´çš„å¼€å‘æ–‡æ¡£

### 4. ç”Ÿäº§å®‰å…¨
- ç¯å¢ƒéš”ç¦»
- ä»…å¼€å‘æ—¶ä½¿ç”¨
- ä¸å½±å“ç”Ÿäº§æ„å»º

## ğŸ”§ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°çš„ API ç«¯ç‚¹

1. **æ›´æ–°è·¯ç”±æ˜ å°„**
   ```json
   // src/mock/routes.json
   {
     "/api/new-endpoint": "/newEndpoint"
   }
   ```

2. **ç”Ÿæˆå¯¹åº”æ•°æ®**
   ```javascript
   // src/mock/generate-data.js
   function generateNewEndpoint() {
     return [/* æ•°æ® */];
   }
   ```

3. **æ·»åŠ ç‰¹æ®Šé€»è¾‘ï¼ˆå¯é€‰ï¼‰**
   ```javascript
   // src/mock/middleware.js
   if (req.path.includes('/new-endpoint')) {
     // ç‰¹æ®Šå¤„ç†é€»è¾‘
   }
   ```

### ä¿®æ”¹ç°æœ‰æ•°æ®
1. ç¼–è¾‘ `src/mock/generate-data.js` ä¸­å¯¹åº”å‡½æ•°
2. è¿è¡Œ `npm run mock:generate` é‡æ–°ç”Ÿæˆ
3. é‡å¯ Mock æœåŠ¡å™¨

## ğŸ“Š æ€§èƒ½è¡¨ç°

- **å¯åŠ¨æ—¶é—´**: < 10ç§’
- **API å“åº”**: < 100ms
- **æ•°æ®åŠ è½½**: å³æ—¶å“åº”
- **å†…å­˜å ç”¨**: < 50MB

## ğŸ›¡ï¸ å®‰å…¨è€ƒè™‘

- Mock æ¨¡å¼ä»…åœ¨å¼€å‘ç¯å¢ƒå¯ç”¨
- ç”Ÿäº§æ„å»ºè‡ªåŠ¨æ’é™¤ Mock ç›¸å…³ä»£ç 
- æ•æ„Ÿæ•°æ®ä½¿ç”¨æ¨¡æ‹Ÿå€¼ï¼Œä¸å«çœŸå®ä¿¡æ¯

## ğŸ“š æ–‡æ¡£èµ„æº

- `MOCK_MODE_README.md` - è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
- `CMS_MOCK_IMPLEMENTATION_SUMMARY.md` - æœ¬å®æ–½æ€»ç»“
- å†…è”ä»£ç æ³¨é‡Š - æŠ€æœ¯å®ç°è¯´æ˜

## ğŸ‰ ç»“è®º

Mock æ¨¡å¼çš„æˆåŠŸå®æ–½ä¸º CMS å‰ç«¯é¡¹ç›®å¸¦æ¥äº†ä»¥ä¸‹ä»·å€¼ï¼š

1. **ç‹¬ç«‹å¼€å‘** - å‰ç«¯å›¢é˜Ÿæ— éœ€ç­‰å¾…åç«¯æ¥å£
2. **å¿«é€Ÿæµ‹è¯•** - å³æ—¶éªŒè¯åŠŸèƒ½å’Œç•Œé¢
3. **æ¼”ç¤ºå‹å¥½** - éšæ—¶å±•ç¤ºå®Œæ•´åŠŸèƒ½
4. **å­¦ä¹ è¾…åŠ©** - æ–°æˆå‘˜å¿«é€Ÿäº†è§£ç³»ç»ŸåŠŸèƒ½
5. **å›å½’æµ‹è¯•** - ç¨³å®šçš„æµ‹è¯•ç¯å¢ƒ

æ•´ä¸ª Mock ç³»ç»Ÿè®¾è®¡å®Œå–„ã€åŠŸèƒ½å®Œæ•´ã€æ˜“äºä½¿ç”¨å’Œç»´æŠ¤ï¼Œä¸ºé¡¹ç›®çš„é«˜æ•ˆå¼€å‘æä¾›äº†å¼ºæœ‰åŠ›çš„æ”¯æŒã€‚