# Angular 权限管理系统

这是一个完整的角色基权限管理系统，使用 Angular 20 构建，包含用户管理、角色管理和权限管理功能。

## 功能特性

### 🔐 用户管理
- 创建、编辑、删除用户
- 用户状态管理（活跃/禁用）
- 为用户分配多个角色
- 用户信息完整展示

### 👥 角色管理  
- 创建、编辑、删除角色
- 为角色分配权限
- 角色描述和权限数量统计
- 角色权限可视化管理

### 🛡️ 权限管理
- 按模块分组的权限管理
- 创建、编辑、删除权限
- 权限代码和描述管理
- 模块化权限组织

### 🎨 现代化 UI
- 响应式设计，支持移动端
- 模态弹窗表单
- 标签页切换界面
- 现代化的表格和卡片布局

## 技术栈

- **框架**: Angular 20
- **组件**: Standalone Components
- **表单**: Reactive Forms
- **路由**: Angular Router
- **样式**: 原生 CSS，响应式设计
- **数据存储**: 本地服务（可扩展为后端 API）

## 预设数据

### 用户账号
| 用户名 | 密码 | 角色 | 状态 |
|--------|------|------|------|
| admin | 123456 | 超级管理员 | 活跃 |
| editor | 123456 | 编辑者 | 活跃 |
| viewer | 123456 | 查看者 | 禁用 |

### 角色权限
- **超级管理员**: 拥有所有权限
- **编辑者**: 内容管理相关权限
- **查看者**: 仅查看权限

### 权限模块
- **用户管理**: 查看用户、创建用户、编辑用户
- **内容管理**: 查看文章、创建文章、编辑文章、发布文章、删除文章
- **系统设置**: 查看系统设置、修改系统设置、日志查看
- **权限管理**: 权限管理

## 快速开始

### 1. 安装依赖
```bash
cd frontend
npm install
```

### 2. 启动开发服务器
```bash
npm start
```

### 3. 访问应用
打开浏览器访问 `http://localhost:4200`

### 4. 登录系统
使用预设账号登录：
- 用户名: `admin`
- 密码: `123456`

## 使用指南

### 登录
1. 在登录页面输入用户名和密码
2. 点击登录按钮
3. 成功后自动跳转到权限管理页面

### 用户管理
1. 点击"用户管理"标签页
2. 查看用户列表，包含用户基本信息和角色
3. 点击"添加用户"创建新用户
4. 点击"编辑"修改用户信息和角色分配
5. 点击"删除"移除用户

### 角色管理
1. 点击"角色管理"标签页
2. 查看角色列表和权限数量
3. 点击"添加角色"创建新角色
4. 在角色表单中选择权限（按模块分组）
5. 点击"编辑"修改角色权限
6. 点击"删除"移除角色（如有用户使用则不能删除）

### 权限管理
1. 点击"权限管理"标签页
2. 查看按模块分组的权限列表
3. 点击"添加权限"创建新权限
4. 设置权限名称、代码、描述和所属模块
5. 点击"编辑"修改权限信息
6. 点击"删除"移除权限（如有角色使用则不能删除）

### 导航功能
- 顶部导航栏显示当前登录用户
- 点击"权限管理"按钮快速访问管理页面
- 点击"退出"按钮注销登录

## 核心代码结构

```
src/app/
├── app.ts                          # 主应用组件
├── app.html                        # 主应用模板
├── app.scss                        # 主应用样式
├── app.routes.ts                   # 路由配置
├── login.component.ts              # 登录组件
├── permission-management.component.ts  # 权限管理主组件
└── permission.service.ts           # 权限服务（数据层）
```

## 数据模型

### User（用户）
```typescript
interface User {
  id: number;
  username: string;
  email: string;
  password: string;
  roleIds: number[];
  status: 'active' | 'inactive';
  createdAt: Date;
  updatedAt: Date;
}
```

### Role（角色）
```typescript
interface Role {
  id: number;
  name: string;
  description: string;
  permissionIds: number[];
  createdAt: Date;
  updatedAt: Date;
}
```

### Permission（权限）
```typescript
interface Permission {
  id: number;
  name: string;
  code: string;
  description: string;
  module: string;
  createdAt: Date;
  updatedAt: Date;
}
```

## 主要功能实现

### 权限验证
- `hasPermission(userId, permissionCode)`: 检查用户是否拥有特定权限
- `getUserPermissions(userId)`: 获取用户所有权限
- `getUserRoles(userId)`: 获取用户所有角色

### 数据管理
- 完整的 CRUD 操作（创建、读取、更新、删除）
- 数据关联完整性检查
- 数据持久化（localStorage，可扩展为后端 API）

### 表单验证
- 必填字段验证
- 邮箱格式验证
- 实时表单状态反馈

## 扩展建议

### 后端集成
1. 将 `PermissionService` 改为 HTTP 服务
2. 实现 JWT 认证
3. 添加数据库持久化

### 功能增强
1. 添加用户头像和个人资料
2. 实现细粒度权限控制
3. 添加操作日志记录
4. 实现数据导入导出

### UI/UX 优化
1. 添加加载状态指示
2. 实现数据分页
3. 添加搜索和过滤功能
4. 优化移动端体验

## 注意事项

1. **安全性**: 当前密码明文存储，生产环境需要加密
2. **数据持久化**: 使用 localStorage，页面刷新数据会保持
3. **权限检查**: 已实现基础权限验证逻辑
4. **浏览器兼容性**: 支持现代浏览器

## 故障排除

### 常见问题
1. **登录失败**: 确认用户名密码正确，检查用户状态
2. **权限不显示**: 检查角色权限分配
3. **删除失败**: 确认没有其他数据依赖
4. **页面空白**: 检查浏览器控制台错误信息

### 开发调试
- 使用浏览器开发者工具查看控制台日志
- 检查 localStorage 中的用户数据
- 使用 Angular DevTools 调试组件状态

## 联系与支持

如有问题或建议，请查看代码注释或联系开发团队。

---

**开发时间**: 2024年
**技术栈**: Angular 20 + TypeScript + CSS3
**许可证**: MIT